id: scaffold-backend-frontend
version: 1.0
type: implementation
phase: phase-0
status: in_progress
priority: critical
created_at: 2026-02-20T18:16:55Z
updated_at: 2026-02-20T18:24:07Z

# QUOI - Purpose
purpose: |
  Scaffolder une architecture moderne scalable pour AETHERIS:
  - Backend: Node.js 22 LTS + Express 4.21 + TypeScript 5.7 + @supabase/supabase-js 2.50
  - Frontend: React 18.3 + Vite 5.4 + Tailwind 3.4 + Zustand 4.5
  - Tous fichiers de configuration (tsconfig strict, ESLint v8.56.0, Prettier, vite.config)
  - Intégration GitHub: CI/CD workflow, .gitignore avec .env.local protection
  - OpenSpec specification: 6500+ lignes avec 41-icon system documenté
  
  Objectif: Fondation prête pour Sprint 1 (broker connectors + metrics engine)

# COMMENT - Implementation
implementation:
  status: done
  files:
    - backend/package.json
    - backend/src/server.ts
    - backend/src/config/supabase.ts
    - backend/tsconfig.json
    - backend/.eslintrc.json
    - backend/.npmrc
    - frontend/package.json
    - frontend/src/main.tsx
    - frontend/src/App.tsx
    - frontend/src/styles/index.css
    - frontend/vite.config.ts
    - frontend/tailwind.config.js
    - frontend/tsconfig.json
    - .github/workflows/ci.yml
    - .gitignore
  commit: "328 files added, 75,150 insertions (initial commit)"

# OpenSpec Requirements
requirements:
  backend:
    - id: BR-001
      keyword: SHALL
      description: Initialize Express 4.21 server listening on :3001
      details:
        - Load environment variables from .env.local via dotenv
        - Initialize Supabase client with credentials (API_URL, ANON_KEY)
        - Apply CORS, helmet, morgan middleware
        - Support hot-reload via ts-node-dev in dev mode
        - Compile to ES2020 in TypeScript strict mode

    - id: BR-002
      keyword: SHALL
      description: Expose GET /health endpoint returning {"status":"ok","timestamp":"ISO8601"}
      details:
        - Response time: <100ms
        - Used for uptime monitoring + GitHub Actions validation

    - id: BR-003
      keyword: SHALL
      description: Enforce TypeScript strict mode (strict: true)
      details:
        - Target ES2020 compatible
        - Zero TypeScript errors on npm run build
        - Support absolute paths via baseUrl + paths

    - id: BR-004
      keyword: SHALL
      description: Use ESLint v8.56.0 with Prettier formatting
      details:
        - .npmrc with legacy-peer-deps=true
        - Pass npm run lint with zero errors
        - Prettier for formatting consistency

  frontend:
    - id: FR-001
      keyword: SHALL
      description: Load React 18.3 + Vite 5.4 entry point
      details:
        - Render App.tsx component in #root DOM element
        - Display "AETHERIS Trading Copilot OS" header on load
        - Apply Tailwind CSS globally via src/styles/index.css

    - id: FR-002
      keyword: SHALL
      description: Configure Tailwind 3.4 with custom AETHERIS color palette
      details:
        - Expose CSS variables (--aetheris-gold, --aetheris-navy, --aetheris-steel, --aetheris-emerald, --aetheris-crimson, --aetheris-slate)
        - Apply tailwind.config.js with colors object mapping
        - Support responsive design (mobile-first)

    - id: FR-003
      keyword: SHALL
      description: Expose Vite development server with HMR on localhost:5173
      details:
        - Compile JSX/TSX without errors
        - <100ms page reload on file save
        - Support TypeScript strict mode

    - id: FR-004
      keyword: SHALL
      description: Initialize Zustand store for state management
      details:
        - accountStore.ts placeholder
        - Extensible for future features (Armor, Aether Flow)

    - id: FR-005
      keyword: SHALL
      description: Produce production build with minification
      details:
        - Compile to dist/ folder
        - Code splitting + lazy loading
        - Source maps for debugging
        - Zero warnings on npm run build

# Test Scenarios
scenarios:
  - id: SC-001
    title: Backend Server Startup
    given: npm dependencies installed in backend/
    when: User runs `npm run dev` in backend/
    then:
      - Terminal displays "✅ AETHERIS Backend listening on :3001"
      - Server process runs without errors
      - Port :3001 is listening and accepting connections

  - id: SC-002
    title: Health Endpoint Validation
    given: Backend server running on localhost:3001
    when: User executes `curl http://localhost:3001/health`
    then:
      - HTTP 200 OK response
      - Response body contains {"status":"ok","timestamp":"..."}
      - Response time <100ms

  - id: SC-003
    title: Backend ESLint & Build
    given: npm dependencies installed in backend/
    when: User runs `npm run lint` then `npm run build`
    then:
      - ESLint: 0 errors, 0 warnings
      - Build: TypeScript compiles to dist/ without errors
      - dist/server.js exists and is executable

  - id: SC-004
    title: Frontend Dev Server Startup
    given: npm dependencies installed in frontend/
    when: User runs `npm run dev` in frontend/
    then:
      - Terminal displays "➜ Local: http://localhost:5173/"
      - Port :5173 is listening (Vite HMR ready)
      - No compilation errors in console

  - id: SC-005
    title: React App Visual Verification
    given: Frontend dev server running on localhost:5173
    when: User opens http://localhost:5173 in browser
    then:
      - Page loads without 404 errors
      - Header displays "AETHERIS Trading Copilot OS"
      - No console JavaScript errors (F12 DevTools)
      - AETHERIS gold color (#C9A050) visible

  - id: SC-006
    title: Tailwind Colors Applied
    given: Frontend dev server running
    when: User inspects HTML elements with F12
    then:
      - CSS variables --aetheris-gold, --aetheris-navy available
      - Tailwind classes work: `bg-aetheris-gold`, `text-aetheris-navy`
      - Color palette matches AETHERIS Palette v1.0

  - id: SC-007
    title: Frontend ESLint & Build
    given: npm dependencies installed in frontend/
    when: User runs `npm run lint` then `npm run build`
    then:
      - ESLint: 0 errors, 0 warnings
      - React app compiles to dist/ with minification
      - dist/index.html exists

  - id: SC-008
    title: GitHub Actions CI/CD
    given: Code pushed to github.com/miservices00225-cmd/aetheris.git
    when: GitHub Actions workflow triggers on push
    then:
      - Workflow runs CI jobs (lint + build backend + frontend)
      - All jobs complete with status passed ✅
      - Actions tab shows no failed jobs

# Artifacts
artifacts:
  implementation:
    status: done
    verified: true
    location: backend/, frontend/, .github/

  testing:
    status: pending
    checklist:
      - npm install backend
      - npm install frontend
      - npm run dev (backend)
      - curl :3001/health
      - npm run lint (backend)
      - npm run build (backend)
      - npm run dev (frontend)
      - Browser test :5173
      - npm run lint (frontend)
      - npm run build (frontend)
      - GitHub Actions verification

  documentation:
    status: pending
    files_to_create:
      - GETTING_STARTED.md
      - Backend Development Guide
      - Frontend Development Guide
      - Testing Guide

# Dependencies
dependencies:
  blocking:
    - npm install in backend/ (required before npm run dev)
    - npm install in frontend/ (required before npm run dev)
  non_blocking:
    - Supabase credentials (.env.local) [already done]
    - GitHub repository [already done]

# Success Criteria
success_criteria:
  - npm install completes in backend/ + frontend/
  - Backend server starts on :3001 without errors
  - GET /health returns 200 with valid JSON
  - Frontend dev server starts on :5173 without errors
  - Browser shows "AETHERIS" header with gold color
  - npm run lint passes: 0 errors (backend + frontend)
  - npm run build succeeds: dist/ created (backend + frontend)
  - GitHub Actions workflow shows all jobs passed ✅
  - GETTING_STARTED.md created with clear instructions
  - All 3 artifacts marked DONE

# Next Changes (Dependencies)
unlocks:
  - create-supabase-schema (15 tables + RLS policies)
  - implement-broker-connector (MT4 CSV parser, Sprint 1)
  - implement-metrics-engine (200+ KPIs, Sprint 1)
  - build-heatmap-component (Visual Calendar, Sprint 1)
